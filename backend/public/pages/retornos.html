<!-- Estat√≠sticas dos Retornos -->
<div class="row mb-4">
  <div class="col-md-3">
    <div class="card stat-card" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white;">
      <div class="card-body text-center">
        <i class="fas fa-hourglass-half fa-2x mb-2"></i>
        <h4 id="aguardando-count">1</h4>
        <small>Aguardando Chegada</small>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white;">
      <div class="card-body text-center">
        <i class="fas fa-barcode fa-2x mb-2"></i>
        <h4 id="bipando-count">1</h4>
        <small>Bipando</small>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white;">
      <div class="card-body text-center">
        <i class="fas fa-check-double fa-2x mb-2"></i>
        <h4 id="conferido-count">1</h4>
        <small>Conferido</small>
      </div>
    </div>
  </div>
  <div class="col-md-3">
    <div class="card stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
      <div class="card-body text-center">
        <i class="fas fa-boxes fa-2x mb-2"></i>
        <h4 id="total-itens-retornados">3</h4>
        <small>Itens Hoje</small>
      </div>
    </div>
  </div>
</div>

<!-- Controles dos Retornos -->
<div class="row mb-3">
  <div class="col-md-8">
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-outline-primary" onclick="atualizarRetornos()">
        <i class="fas fa-sync-alt"></i> Atualizar
      </button>
      <button type="button" class="btn btn-outline-success" onclick="mostrarModalRegistro()">
        <i class="fas fa-plus"></i> Registrar Retorno
      </button>
    </div>
  </div>
  <div class="col-md-4">
    <div class="input-group">
      <input type="text" class="form-control" id="search-retornos" placeholder="Buscar retornos..." onkeyup="filtrarRetornos(this.value)">
      <button class="btn btn-outline-secondary" type="button">
        <i class="fas fa-search"></i>
      </button>
    </div>
  </div>
</div>

<!-- Lista de Retornos -->
<div class="card shadow-sm">
  <div class="card-header bg-light">
    <h5 class="mb-0">
      <i class="fas fa-undo"></i> Retornos de Carga
    </h5>
  </div>
  <div class="card-body">
    <div id="retornos-container">
      <!-- Jo√£o Silva - Aguardando -->
      <div class="card mb-3 retorno-item" style="border-left: 4px solid #ffc107;" data-nome="joao silva abc1234">
        <div class="card-body">
          <div class="row align-items-center">
            <div class="col-md-3">
              <h6 class="mb-1">
                <i class="fas fa-user"></i> Jo√£o Silva
              </h6>
              <small class="text-muted">CPF: 123.456.789-01</small>
              <br>
              <small class="text-muted">Placa: ABC1234</small>
            </div>
            <div class="col-md-2">
              <i class="fas fa-route"></i> SP-CENTRO
              <br>
              <small class="text-muted">S√£o Paulo Centro</small>
            </div>
            <div class="col-md-2">
              <span class="badge bg-warning">
                Aguardando Chegada
              </span>
              <br>
              <small class="text-muted">Agora mesmo</small>
            </div>
            <div class="col-md-2">
              <i class="fas fa-boxes"></i> 0 itens
              <br>
              <small class="text-muted">bipados</small>
            </div>
            <div class="col-md-3 text-end">
              <button class="btn btn-sm btn-primary me-1" onclick="iniciarBipagem(1, 'Jo√£o Silva')">
                <i class="fas fa-barcode"></i> Iniciar Bipagem
              </button>
              <button class="btn btn-sm btn-danger" onclick="cancelarRetorno(1, 'Jo√£o Silva')">
                <i class="fas fa-times"></i> Cancelar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Maria Santos - Bipando -->
      <div class="card mb-3 retorno-item" style="border-left: 4px solid #007bff;" data-nome="maria santos xyz5678">
        <div class="card-body">
          <div class="row align-items-center">
            <div class="col-md-3">
              <h6 class="mb-1">
                <i class="fas fa-user"></i> Maria Santos
              </h6>
              <small class="text-muted">CPF: 987.654.321-09</small>
              <br>
              <small class="text-muted">Placa: XYZ5678</small>
            </div>
            <div class="col-md-2">
              <i class="fas fa-route"></i> SP-SUL
              <br>
              <small class="text-muted">S√£o Paulo Zona Sul</small>
            </div>
            <div class="col-md-2">
              <span class="badge bg-primary">
                Bipando
              </span>
              <br>
              <small class="text-muted">1h atr√°s</small>
            </div>
            <div class="col-md-2">
              <i class="fas fa-boxes"></i> 1 itens
              <br>
              <small class="text-muted">bipados</small>
            </div>
            <div class="col-md-3 text-end">
              <button class="btn btn-sm btn-success me-1" onclick="continuarBipagem(2, 'Maria Santos')">
                <i class="fas fa-barcode"></i> Continuar Bipagem
              </button>
              <button class="btn btn-sm btn-warning" onclick="finalizarConferencia(2, 'Maria Santos')">
                <i class="fas fa-check"></i> Finalizar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Pedro Oliveira - Conferido -->
      <div class="card mb-3 retorno-item" style="border-left: 4px solid #28a745;" data-nome="pedro oliveira def5678">
        <div class="card-body">
          <div class="row align-items-center">
            <div class="col-md-3">
              <h6 class="mb-1">
                <i class="fas fa-user"></i> Pedro Oliveira
              </h6>
              <small class="text-muted">CPF: 111.222.333-44</small>
              <br>
              <small class="text-muted">Placa: DEF5678</small>
            </div>
            <div class="col-md-2">
              <i class="fas fa-route"></i> SP-NORTE
              <br>
              <small class="text-muted">S√£o Paulo Zona Norte</small>
            </div>
            <div class="col-md-2">
              <span class="badge bg-success">
                Conferido
              </span>
              <br>
              <small class="text-muted">2h atr√°s</small>
            </div>
            <div class="col-md-2">
              <i class="fas fa-boxes"></i> 2 itens
              <br>
              <small class="text-muted">bipados</small>
            </div>
            <div class="col-md-3 text-end">
              <small class="text-success">
                <i class="fas fa-check-circle"></i> Conferido
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.retorno-item {
  transition: all 0.3s ease;
}

.retorno-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
</style>

<script>
console.log('üöÄ Sistema de retornos carregado diretamente!');

// Fun√ß√µes b√°sicas
function atualizarRetornos() {
  console.log('üîÑ Atualizando retornos...');
  // Simular atualiza√ß√£o
  alert('Retornos atualizados!');
}

function mostrarModalRegistro() {
  alert('Modal de registro de retorno\n\nEm breve: formul√°rio para registrar novo retorno manualmente.');
}

function iniciarBipagem(id, nome) {
  console.log('üî• Iniciando bipagem para:', nome);
  alert(`Iniciando bipagem para ${nome}\n\nEm breve: modal de bipagem com scanner de c√≥digo de barras.`);
}

function continuarBipagem(id, nome) {
  console.log('üì¶ Continuando bipagem para:', nome);
  alert(`Continuando bipagem para ${nome}\n\nEm breve: modal mostrando itens j√° bipados e permitindo adicionar mais.`);
}

function finalizarConferencia(id, nome) {
  if (confirm(`Finalizar confer√™ncia de ${nome}?\n\nTodos os itens bipados ser√£o considerados conferidos.`)) {
    console.log('‚úÖ Confer√™ncia finalizada para:', nome);
    alert(`Confer√™ncia de ${nome} finalizada com sucesso!`);
  }
}

function cancelarRetorno(id, nome) {
  const motivo = prompt(`Cancelar retorno de ${nome}\n\nMotivo do cancelamento:`);
  if (motivo) {
    console.log('‚ùå Retorno cancelado:', nome, 'Motivo:', motivo);
    alert(`Retorno de ${nome} cancelado.\nMotivo: ${motivo}`);
  }
}

function filtrarRetornos(termo) {
  const items = document.querySelectorAll('.retorno-item');
  const termoBusca = termo.toLowerCase();
  
  items.forEach(item => {
    const nome = item.getAttribute('data-nome');
    if (nome.includes(termoBusca)) {
      item.style.display = 'block';
    } else {
      item.style.display = 'none';
    }
  });
  
  console.log('üîç Filtro aplicado:', termo);
}
</script>